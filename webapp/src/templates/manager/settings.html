<!doctype html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ØªÙ†Ø¸ÛŒÙ…Ø§Øª - Ø³ÛŒØ³ØªÙ… Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡</title>
    <link href="{{ url_for('static', filename='css/vazirmatn.css') }}" rel="stylesheet" type="text/css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            color: #f1f5f9;
            padding: 1.5rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            padding: 1.25rem 1.5rem;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.06);
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #fff, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-top: 0.2rem;
        }

        .btn-back {
            background: rgba(255,255,255,0.1);
            color: #e2e8f0;
            text-decoration: none;
            padding: 0.7rem 1.2rem;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-back:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(3px);
        }

        /* Flash Messages */
        .flash-messages { margin-bottom: 1.5rem; }
        .flash {
            padding: 1rem 1.25rem;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }
        .flash.success { background: rgba(16, 185, 129, 0.15); color: #6ee7b7; border: 1px solid rgba(16, 185, 129, 0.3); }
        .flash.error { background: rgba(239, 68, 68, 0.15); color: #fca5a5; border: 1px solid rgba(239, 68, 68, 0.3); }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            background: rgba(0,0,0,0.3);
            padding: 0.5rem;
            border-radius: 16px;
            width: fit-content;
        }

        .tab {
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            background: transparent;
            color: #9ca3af;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: inherit;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .tab:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab.active {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Cards */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 1000px) { .settings-grid { grid-template-columns: 1fr; } }

        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid rgba(255,255,255,0.06);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .card-icon {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .card-icon.purple { background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1)); }
        .card-icon.green { background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1)); }
        .card-icon.blue { background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.1)); }
        .card-icon.orange { background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(245, 158, 11, 0.1)); }
        .card-icon.pink { background: linear-gradient(135deg, rgba(236, 72, 153, 0.3), rgba(236, 72, 153, 0.1)); }

        .card-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: #fff;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            color: #94a3b8;
            margin-bottom: 0.4rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            color: #f3f4f6;
            font-family: inherit;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .form-group textarea { resize: vertical; min-height: 80px; }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #047857);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #e2e8f0;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.15);
        }

        .btn-sm {
            padding: 0.5rem 0.8rem;
            font-size: 0.8rem;
        }

        /* Stats Grid */
        .stats-mini-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        .stat-mini {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 0.75rem;
            text-align: center;
        }

        .stat-mini .value {
            font-size: 1.3rem;
            font-weight: 900;
            color: #fff;
        }

        .stat-mini .label {
            font-size: 0.7rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        /* Backup List */
        .backup-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .backup-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            margin-bottom: 0.5rem;
            border: 1px solid rgba(255,255,255,0.04);
            transition: all 0.2s;
        }

        .backup-item:hover {
            border-color: rgba(139, 92, 246, 0.3);
            background: rgba(139, 92, 246, 0.05);
        }

        .backup-info {
            flex: 1;
        }

        .backup-name {
            font-weight: 700;
            color: #fff;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .backup-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.75rem;
            color: #94a3b8;
        }

        .backup-actions {
            display: flex;
            gap: 0.5rem;
        }

        .no-backups {
            text-align: center;
            padding: 2rem;
            color: #64748b;
        }

        .no-backups .icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            opacity: 0.5;
        }

        /* Upload Form */
        .upload-area {
            border: 2px dashed rgba(255,255,255,0.2);
            border-radius: 14px;
            padding: 2rem;
            text-align: center;
            transition: all 0.2s;
            margin-top: 1rem;
        }

        .upload-area:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.05);
        }

        .upload-area .icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }

        .upload-area p {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }

        .upload-area input[type="file"] {
            display: none;
        }

        /* Toggle Switch */
        .toggle-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.04);
        }

        .toggle-label {
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.1);
            transition: 0.3s;
            border-radius: 26px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: linear-gradient(135deg, #10b981, #047857);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Info Box */
        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #93c5fd;
        }

        .info-box .icon {
            margin-left: 0.5rem;
        }

        /* Danger Zone */
        .danger-zone {
            background: rgba(239, 68, 68, 0.05);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 14px;
            padding: 1.25rem;
            margin-top: 1.5rem;
        }

        .danger-zone h4 {
            color: #fca5a5;
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .danger-zone p {
            color: #94a3b8;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }

        /* Full Width Card */
        .card.full-width {
            grid-column: 1 / -1;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 3px; }
        ::-webkit-scrollbar-thumb { background: rgba(139, 92, 246, 0.3); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(139, 92, 246, 0.5); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-title">
                <div class="header-icon">âš™ï¸</div>
                <div>
                    <h1>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h1>
                    <p>Ù…Ø¯ÛŒØ±ÛŒØª ØªÙ†Ø¸ÛŒÙ…Ø§ØªØŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</p>
                </div>
            </div>
            <a href="{{ url_for('manager.index') }}" class="btn-back">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash {{ category }}">
                            {% if category == 'success' %}âœ“{% else %}âš {% endif %}
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <div class="tabs">
            <button class="tab active" onclick="showTab('backup')">
                <span>ğŸ’¾</span> Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ
            </button>
            <button class="tab" onclick="showTab('clinic')">
                <span>ğŸ¥</span> Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒÙ†ÛŒÚ©
            </button>
            <button class="tab" onclick="showTab('network')">
                <span>ğŸŒ</span> Ø´Ø¨Ú©Ù‡
            </button>
            <button class="tab" onclick="showTab('database')">
                <span>ğŸ“Š</span> Ø¢Ù…Ø§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
            </button>
            <button class="tab" onclick="showTab('system')">
                <span>ğŸ”§</span> ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…
            </button>
        </div>

        <!-- ========== Tab 1: Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ ========== -->
        <div class="tab-content active" id="tab-backup">
            <div class="settings-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon green">ğŸ’¾</div>
                        <h3 class="card-title">Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¬Ø¯ÛŒØ¯</h3>
                    </div>

                    <p style="color: #94a3b8; font-size: 0.85rem; margin-bottom: 1.25rem;">
                        Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ±ØŒ ÛŒÚ© Ù†Ø³Ø®Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§Ø² Ú©Ù„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </p>

                    <form method="post">
                        <input type="hidden" name="action" value="create_backup">
                        <button type="submit" class="btn btn-success">
                            <span>ğŸ’¾</span> Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¬Ø¯ÛŒØ¯
                        </button>
                    </form>

                    <div class="info-box">
                        <span class="icon">â„¹ï¸</span>
                        Ø¨Ú©Ø§Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡ÙØªÚ¯ÛŒ ÙØ¹Ø§Ù„ Ø§Ø³Øª. Ù‡Ø± Ù‡ÙØªÙ‡ ÛŒÚ© Ø¨Ú©Ø§Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>

                    <div class="upload-area">
                        <div class="icon">ğŸ“¤</div>
                        <p>ÛŒØ§ ÛŒÚ© ÙØ§ÛŒÙ„ Ø¨Ú©Ø§Ù¾ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯</p>
                        <form method="post" action="{{ url_for('manager.upload_backup') }}" enctype="multipart/form-data" id="upload-form">
                            <input type="file" name="backup_file" id="backup-file" accept=".db" onchange="document.getElementById('upload-form').submit()">
                            <label for="backup-file" class="btn btn-secondary">
                                <span>ğŸ“</span> Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„ .db
                            </label>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon purple">ğŸ“‹</div>
                        <h3 class="card-title">Ù„ÛŒØ³Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÙ‡Ø§</h3>
                    </div>

                    <div class="backup-list">
                        {% if backups %}
                            {% for backup in backups %}
                            <div class="backup-item">
                                <div class="backup-info">
                                    <div class="backup-name">{{ backup.name }}</div>
                                    <div class="backup-meta">
                                        <span>ğŸ“… {{ backup.date }}</span>
                                        <span>ğŸ“¦ {{ backup.size }} KB</span>
                                    </div>
                                </div>
                                <div class="backup-actions">
                                    <a href="{{ url_for('manager.download_backup', backup_name=backup.name) }}" class="btn btn-secondary btn-sm" title="Ø¯Ø§Ù†Ù„ÙˆØ¯">
                                        â¬‡ï¸
                                    </a>
                                    <form method="post" style="display: inline;" onsubmit="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ø¨Ú©Ø§Ù¾ Ø±Ø§ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ú©Ù†ÛŒØ¯ØŸ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙØ¹Ù„ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯.');">
                                        <input type="hidden" name="action" value="restore_backup">
                                        <input type="hidden" name="backup_name" value="{{ backup.name }}">
                                        <button type="submit" class="btn btn-primary btn-sm" title="Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ">
                                            ğŸ”„
                                        </button>
                                    </form>
                                    <form method="post" style="display: inline;" onsubmit="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ø¨Ú©Ø§Ù¾ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ');">
                                        <input type="hidden" name="action" value="delete_backup">
                                        <input type="hidden" name="backup_name" value="{{ backup.name }}">
                                        <button type="submit" class="btn btn-danger btn-sm" title="Ø­Ø°Ù">
                                            ğŸ—‘ï¸
                                        </button>
                                    </form>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="no-backups">
                                <div class="icon">ğŸ“­</div>
                                <p>Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== Tab 2: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒÙ†ÛŒÚ© ========== -->
        <div class="tab-content" id="tab-clinic">
            <div class="settings-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon blue">ğŸ¥</div>
                        <h3 class="card-title">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒÙ†ÛŒÚ©</h3>
                    </div>

                    <form method="post">
                        <input type="hidden" name="action" value="save_settings">

                        <div class="form-group">
                            <label>Ù†Ø§Ù… Ú©Ù„ÛŒÙ†ÛŒÚ© / Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡</label>
                            <input type="text" name="clinic_name" value="{{ settings.get('clinic_name', 'Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡ Ø³ÛŒØ¨') }}" placeholder="Ù†Ø§Ù… Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡">
                        </div>

                        <div class="form-group">
                            <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                            <input type="text" name="clinic_phone" value="{{ settings.get('clinic_phone', '') }}" placeholder="021-12345678">
                        </div>

                        <div class="form-group">
                            <label>Ø¢Ø¯Ø±Ø³</label>
                            <textarea name="clinic_address" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„ Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡">{{ settings.get('clinic_address', '') }}</textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <span>ğŸ’¾</span> Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                        </button>
                    </form>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon orange">ğŸ–¨ï¸</div>
                        <h3 class="card-title">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú†Ø§Ù¾</h3>
                    </div>

                    <p style="color: #64748b; font-size: 0.85rem; text-align: center; padding: 2rem;">
                        ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ± Ùˆ Ù‚Ø¨Ø¶ Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.
                    </p>
                </div>
            </div>
        </div>

        <!-- ========== Tab 3: Ø´Ø¨Ú©Ù‡ ========== -->
        <div class="tab-content" id="tab-network">
            <div class="settings-grid">
                <!-- Ú©Ø§Ø±Øª Ø§ØµÙ„ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø¨Ú©Ù‡ -->
                <div class="card full-width">
                    <div class="card-header">
                        <div class="card-icon" style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(6, 182, 212, 0.1));">ğŸŒ</div>
                        <h3 class="card-title">Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø² Ø´Ø¨Ú©Ù‡ Ù…Ø­Ù„ÛŒ</h3>
                    </div>

                    <!-- Ø¢Ø¯Ø±Ø³ Ø§ØµÙ„ÛŒ -->
                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.15)); border: 2px solid rgba(16, 185, 129, 0.3); border-radius: 16px; padding: 1.5rem; text-align: center; margin-bottom: 1.5rem;">
                        <div style="font-size: 0.9rem; color: #10b981; margin-bottom: 0.5rem; font-weight: 700;">âœ… Ø¢Ø¯Ø±Ø³ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±:</div>
                        {% if network_info.access_urls and network_info.access_urls|length > 0 %}
                        <div id="main-url" style="font-family: 'Consolas', 'Monaco', monospace; font-size: 1.6rem; font-weight: 900; color: #fff; background: rgba(0,0,0,0.4); padding: 1.25rem; border-radius: 12px; margin: 1rem 0; letter-spacing: 1px; direction: ltr;">
                            {{ network_info.access_urls[0] }}
                        </div>
                        <div style="display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap;">
                            <button onclick="copyUrl()" class="btn btn-primary" style="background: linear-gradient(135deg, #10b981, #059669);">
                                <span>ğŸ“‹</span> Ú©Ù¾ÛŒ Ø¢Ø¯Ø±Ø³
                            </button>
                            <button onclick="openInNewTab()" class="btn btn-secondary">
                                <span>ğŸ”—</span> Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø± ØªØ¨ Ø¬Ø¯ÛŒØ¯
                            </button>
                        </div>
                        {% else %}
                        <div style="font-family: monospace; font-size: 1.4rem; font-weight: 900; color: #fff; background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 12px; margin-bottom: 1rem;">
                            http://127.0.0.1:8080
                        </div>
                        <div style="color: #f59e0b; font-size: 0.85rem;">
                            âš ï¸ Ø¢Ø¯Ø±Ø³ Ø´Ø¨Ú©Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯. Ø³Ø±ÙˆØ± Ø±Ø§ Ø¨Ø§ --host=0.0.0.0 Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.
                        </div>
                        {% endif %}
                    </div>

                    <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ± -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: rgba(0,0,0,0.25); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-size: 0.75rem; color: #94a3b8; margin-bottom: 0.5rem;">ğŸ–¥ï¸ Ù†Ø§Ù… Ø³Ø±ÙˆØ±</div>
                            <div style="font-size: 1rem; font-weight: 700; color: #fff;">{{ network_info.hostname }}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.25); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-size: 0.75rem; color: #94a3b8; margin-bottom: 0.5rem;">ğŸ”Œ Ù¾ÙˆØ±Øª</div>
                            <div style="font-size: 1rem; font-weight: 700; color: #22d3ee;">{{ network_info.port }}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.25); border-radius: 12px; padding: 1rem; text-align: center;">
                            <div style="font-size: 0.75rem; color: #94a3b8; margin-bottom: 0.5rem;">ğŸ“¡ ÙˆØ¶Ø¹ÛŒØª</div>
                            <div style="font-size: 1rem; font-weight: 700; color: #10b981;">â— Ø¢Ù†Ù„Ø§ÛŒÙ†</div>
                        </div>
                    </div>

                    <!-- Ù„ÛŒØ³Øª IP Ù‡Ø§ -->
                    <div style="margin-bottom: 1.5rem;">
                        <div style="font-size: 0.9rem; font-weight: 700; color: #e2e8f0; margin-bottom: 0.75rem;">ğŸ“¡ Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ IP Ù…ÙˆØ¬ÙˆØ¯:</div>
                        {% for ip in network_info.local_ips %}
                        <div style="background: rgba(0,0,0,0.25); border-radius: 10px; padding: 0.85rem 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; justify-content: space-between; border: 1px solid rgba(255,255,255,0.05);">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="font-family: 'Consolas', monospace; font-size: 1.05rem; color: #22d3ee; direction: ltr;">{{ ip }}</span>
                                <span style="color: #64748b;">:</span>
                                <span style="font-family: monospace; color: #a78bfa;">{{ network_info.port }}</span>
                            </div>
                            {% if ip == '127.0.0.1' %}
                            <span style="font-size: 0.7rem; color: #64748b; background: rgba(255,255,255,0.05); padding: 0.3rem 0.6rem; border-radius: 6px;">ğŸ–¥ï¸ Ù„ÙˆÚ©Ø§Ù„</span>
                            {% elif ip.startswith('192.168.') %}
                            <span style="font-size: 0.7rem; color: #10b981; background: rgba(16, 185, 129, 0.15); padding: 0.3rem 0.6rem; border-radius: 6px;">ğŸ“¶ WiFi / LAN</span>
                            {% elif ip.startswith('172.') %}
                            <span style="font-size: 0.7rem; color: #f59e0b; background: rgba(245, 158, 11, 0.15); padding: 0.3rem 0.6rem; border-radius: 6px;">ğŸ³ Docker/WSL</span>
                            {% elif ip.startswith('10.') %}
                            <span style="font-size: 0.7rem; color: #3b82f6; background: rgba(59, 130, 246, 0.15); padding: 0.3rem 0.6rem; border-radius: 6px;">ğŸ¢ Ø´Ø¨Ú©Ù‡ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ</span>
                            {% else %}
                            <span style="font-size: 0.7rem; color: #10b981; background: rgba(16, 185, 129, 0.1); padding: 0.3rem 0.6rem; border-radius: 6px;">âœ“ Ø´Ø¨Ú©Ù‡</span>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Ú©Ø§Ø±Øª Ø±Ø§Ù‡Ù†Ù…Ø§ -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon blue">ğŸ“±</div>
                        <h3 class="card-title">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§ØªØµØ§Ù„</h3>
                    </div>

                    <div style="font-size: 0.85rem; color: #94a3b8; line-height: 1.8;">
                        <div style="background: rgba(0,0,0,0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="color: #22d3ee; font-weight: 700; margin-bottom: 0.5rem;">1ï¸âƒ£ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø´Ø¨Ú©Ù‡</div>
                            <p>Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§ (Ù…ÙˆØ¨Ø§ÛŒÙ„/Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±) Ø¨Ù‡ <strong style="color: #fff;">Ù‡Ù…Ø§Ù† WiFi ÛŒØ§ Ø´Ø¨Ú©Ù‡ LAN</strong> Ú©Ù‡ Ø³Ø±ÙˆØ± Ù…ØªØµÙ„ Ø§Ø³ØªØŒ ÙˆØµÙ„ Ø¨Ø§Ø´Ø¯.</p>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="color: #22d3ee; font-weight: 700; margin-bottom: 0.5rem;">2ï¸âƒ£ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø±ÙˆØ±Ú¯Ø±</div>
                            <p>Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ ÛŒØ§ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ø¯ÛŒÚ¯Ø±ØŒ Ù…Ø±ÙˆØ±Ú¯Ø± (Chrome, Safari, Firefox) Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯.</p>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="color: #22d3ee; font-weight: 700; margin-bottom: 0.5rem;">3ï¸âƒ£ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¢Ø¯Ø±Ø³</div>
                            <p>Ø¢Ø¯Ø±Ø³ Ø¨Ø§Ù„Ø§ Ø±Ø§ <strong style="color: #fff;">Ø¯Ù‚ÛŒÙ‚Ø§Ù‹</strong> Ø¯Ø± Ù†ÙˆØ§Ø± Ø¢Ø¯Ø±Ø³ Ù…Ø±ÙˆØ±Ú¯Ø± ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯.</p>
                        </div>
                        <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 10px; padding: 1rem;">
                            <div style="color: #10b981; font-weight: 700; margin-bottom: 0.5rem;">ğŸ’¡ Ù†Ú©ØªÙ‡</div>
                            <p style="color: #86efac;">Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ±ØŒ Ø¢Ø¯Ø±Ø³ Ø±Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ (Add to Home Screen).</p>
                        </div>
                    </div>
                </div>

                <!-- Ú©Ø§Ø±Øª Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon orange">ğŸ”§</div>
                        <h3 class="card-title">Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ</h3>
                    </div>

                    <div style="font-size: 0.85rem; color: #94a3b8; line-height: 1.8;">
                        <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="color: #fca5a5; font-weight: 700; margin-bottom: 0.5rem;">âŒ ØµÙØ­Ù‡ Ø¨Ø§Ø² Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ</div>
                            <ul style="margin: 0; padding-right: 1.25rem; color: #f87171;">
                                <li>ÙØ§ÛŒØ±ÙˆØ§Ù„ ÙˆÛŒÙ†Ø¯ÙˆØ² Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯</li>
                                <li>Ù¾ÙˆØ±Øª {{ network_info.port }} Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ø² Ø¨Ø§Ø´Ø¯</li>
                                <li>Ø¢Ù†ØªÛŒâ€ŒÙˆÛŒØ±ÙˆØ³ Ø±Ø§ Ù…ÙˆÙ‚ØªØ§Ù‹ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
                            </ul>
                        </div>
                        <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <div style="color: #fcd34d; font-weight: 700; margin-bottom: 0.5rem;">âš ï¸ Ø¯Ø³ØªÙˆØ± Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ÙØ§ÛŒØ±ÙˆØ§Ù„:</div>
                            <code style="display: block; background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.75rem; color: #fbbf24; direction: ltr; text-align: left; overflow-x: auto;">
New-NetFirewallRule -DisplayName "Clinic" -Direction Inbound -Protocol TCP -LocalPort {{ network_info.port }} -Action Allow
                            </code>
                            <p style="margin-top: 0.5rem; font-size: 0.75rem; color: #d97706;">* Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø¯Ø± PowerShell Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Admin Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.</p>
                        </div>
                        <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 10px; padding: 1rem;">
                            <div style="color: #93c5fd; font-weight: 700; margin-bottom: 0.5rem;">ğŸ”„ Ù‡Ù†ÙˆØ² Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±ÛŒØ¯ØŸ</div>
                            <p style="color: #60a5fa;">Ø³Ø±ÙˆØ± Ø±Ø§ Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øª Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø¨Ø§ <code style="background: rgba(0,0,0,0.3); padding: 0.2rem 0.4rem; border-radius: 4px;">--host=0.0.0.0</code> Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== Tab 4: Ø¢Ù…Ø§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ========== -->
        <div class="tab-content" id="tab-database">
            <div class="settings-grid">
                <div class="card full-width">
                    <div class="card-header">
                        <div class="card-icon pink">ğŸ“Š</div>
                        <h3 class="card-title">ÙˆØ¶Ø¹ÛŒØª Ø¯ÛŒØªØ§Ø¨ÛŒØ³</h3>
                    </div>

                    <div class="stats-mini-grid" style="grid-template-columns: repeat(6, 1fr); margin-bottom: 1.5rem;">
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.patients }}</div>
                            <div class="label">Ø¨ÛŒÙ…Ø§Ø±</div>
                        </div>
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.invoices }}</div>
                            <div class="label">ÙØ§Ú©ØªÙˆØ±</div>
                        </div>
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.visits }}</div>
                            <div class="label">ÙˆÛŒØ²ÛŒØª</div>
                        </div>
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.injections }}</div>
                            <div class="label">ØªØ²Ø±ÛŒÙ‚</div>
                        </div>
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.procedures }}</div>
                            <div class="label">Ú©Ø§Ø± Ø¹Ù…Ù„ÛŒ</div>
                        </div>
                        <div class="stat-mini">
                            <div class="value">{{ db_stats.users }}</div>
                            <div class="label">Ú©Ø§Ø±Ø¨Ø±</div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 2rem; justify-content: center; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 12px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 900; color: #a78bfa;">{{ db_size }}</div>
                            <div style="font-size: 0.8rem; color: #94a3b8;">Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</div>
                            <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.25rem;">Ø­Ø¬Ù… Ø¯ÛŒØªØ§Ø¨ÛŒØ³</div>
                        </div>
                        <div style="width: 1px; background: rgba(255,255,255,0.1);"></div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 900; color: #10b981;">{{ backups|length }}</div>
                            <div style="font-size: 0.8rem; color: #94a3b8;">Ø¹Ø¯Ø¯</div>
                            <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.25rem;">Ù†Ø³Ø®Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== Tab 4: ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ… ========== -->
        <div class="tab-content" id="tab-system">
            <div class="settings-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon green">ğŸ”„</div>
                        <h3 class="card-title">Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±</h3>
                    </div>

                    <form method="post">
                        <input type="hidden" name="action" value="save_settings">

                        <div class="toggle-group">
                            <span class="toggle-label">Ø¨Ú©Ø§Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡ÙØªÚ¯ÛŒ</span>
                            <label class="toggle-switch">
                                <input type="checkbox" name="auto_backup" value="1" {% if settings.get('auto_backup', '1') == '1' %}checked{% endif %}>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="info-box" style="margin-top: 1rem;">
                            <span class="icon">ğŸ“…</span>
                            Ø¨Ú©Ø§Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± Ù‡ÙØªÙ‡ (Ø´Ù†Ø¨Ù‡â€ŒÙ‡Ø§) Ø³Ø§Ø¹Øª Û³ ØµØ¨Ø­ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                        </div>

                        <button type="submit" class="btn btn-primary" style="margin-top: 1.25rem;">
                            <span>ğŸ’¾</span> Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                        </button>
                    </form>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon purple">ğŸ”</div>
                        <h3 class="card-title">Ø§Ù…Ù†ÛŒØª</h3>
                    </div>

                    <div class="toggle-group">
                        <span class="toggle-label">Ù„Ø§Ú¯ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§</span>
                        <label class="toggle-switch">
                            <input type="checkbox" checked disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="toggle-group">
                        <span class="toggle-label">Ø°Ø®ÛŒØ±Ù‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</span>
                        <label class="toggle-switch">
                            <input type="checkbox" checked disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="danger-zone">
                        <h4>âš ï¸ Ù…Ù†Ø·Ù‚Ù‡ Ø®Ø·Ø±</h4>
                        <p>Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª. Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø· Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p>
                        <button class="btn btn-danger btn-sm" onclick="showResetDatabaseDialog()">
                            ğŸ—‘ï¸ Ø±ÛŒØ³Øª Ú©Ø§Ù…Ù„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Remove active from all tabs and content
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            // Add active to clicked tab and corresponding content
            event.target.closest('.tab').classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
        }
        
        function copyUrl() {
            const urlElement = document.getElementById('main-url');
            if (urlElement) {
                const url = urlElement.textContent.trim();
                navigator.clipboard.writeText(url).then(() => {
                    const btn = event.target.closest('button');
                    const originalHtml = btn.innerHTML;
                    btn.innerHTML = '<span>âœ“</span> Ú©Ù¾ÛŒ Ø´Ø¯!';
                    btn.style.background = 'linear-gradient(135deg, #10b981, #047857)';
                    setTimeout(() => {
                        btn.innerHTML = originalHtml;
                        btn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    }, 2000);
                }).catch(err => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = url;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Ø¢Ø¯Ø±Ø³ Ú©Ù¾ÛŒ Ø´Ø¯: ' + url);
                });
            }
        }
        
        function openInNewTab() {
            const urlElement = document.getElementById('main-url');
            if (urlElement) {
                const url = urlElement.textContent.trim();
                window.open(url, '_blank');
            }
        }
        
        // === Ø±ÛŒØ³Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ===
        function showResetDatabaseDialog() {
            // Ø§Ø®Ø·Ø§Ø± Ø§ÙˆÙ„
            if (!confirm('âš ï¸ Ù‡Ø´Ø¯Ø§Ø±!\n\nØ¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ Ø±ÛŒØ³Øª Ú©Ù†ÛŒØ¯ØŸ\n\nÙ‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ø¬Ù…Ù„Ù‡:\nâ€¢ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù†\nâ€¢ ÙØ§Ú©ØªÙˆØ±Ù‡Ø§\nâ€¢ ÙˆÛŒØ²ÛŒØªâ€ŒÙ‡Ø§\nâ€¢ Ø®Ø¯Ù…Ø§Øª Ù¾Ø±Ø³ØªØ§Ø±ÛŒ\nâ€¢ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ\nâ€¢ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†\n\nØ¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯!')) {
                return;
            }
            
            // Ø§Ø®Ø·Ø§Ø± Ø¯ÙˆÙ…
            if (!confirm('â›” Ø§Ø®Ø·Ø§Ø± Ø¬Ø¯ÛŒ!\n\nØ§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª!\n\nØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ù‚Ø¨Ù„ Ø§Ø² Ø§ÛŒÙ† Ú©Ø§Ø± ÛŒÚ© Ù†Ø³Ø®Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù† ØªÙ‡ÛŒÙ‡ Ú©Ù†ÛŒØ¯.\n\nØ¢ÛŒØ§ Ù‡Ù…Ú†Ù†Ø§Ù† Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯ØŸ')) {
                return;
            }
            
            // Ø§Ø®Ø·Ø§Ø± Ø³ÙˆÙ… Ø¨Ø§ ØªØ§ÛŒÙ¾ Ú©Ù„Ù…Ù‡
            const userInput = prompt('âš ï¸ ØªØ§ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ\n\nØ¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯ Ø±ÛŒØ³Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ØŒ Ø¹Ø¨Ø§Ø±Øª Ø²ÛŒØ± Ø±Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯:\n\nDELETE_ALL_DATA');
            
            if (userInput !== 'DELETE_ALL_DATA') {
                alert('Ø¹Ø¨Ø§Ø±Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ØµØ­ÛŒØ­ Ù†ÛŒØ³Øª. Ø¹Ù…Ù„ÛŒØ§Øª Ù„ØºÙˆ Ø´Ø¯.');
                return;
            }
            
            // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±ÛŒØ³Øª
            const formData = new FormData();
            formData.append('confirm_code', 'DELETE_ALL_DATA');
            
            fetch('{{ url_for("manager.reset_database") }}', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('âœ… ' + data.message);
                    // Ø±ÛŒØ¯Ø§ÛŒØ±Ú©Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
                    window.location.href = '{{ url_for("auth.login") }}';
                } else {
                    alert('âŒ Ø®Ø·Ø§: ' + data.error);
                }
            })
            .catch(error => {
                alert('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±: ' + error);
            });
        }
    </script>
</body>
</html>